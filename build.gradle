buildscript {
    apply from: "$COMMON_SETUP"
}

plugins {
    id "base"
    id "org.jetbrains.kotlin.jvm" version "$KOTLIN_VERSION"
    id "org.jetbrains.kotlin.kapt" version "$KOTLIN_VERSION"
    id "net.rdrei.android.buildtimetracker" version "$BUILD_TIME_TRACKER_VERSION"
    id "org.jlleitschuh.gradle.ktlint" version "$KTLINT_GRADLE_VERSION"
    id "ru.vyarus.animalsniffer" version "$ANIMALS_SNIFFER_VERSION"
    id "idea"
}

apply from: "$GENERIC_CONF"
apply from: "$SUBPROJECT_CONF"

ktlintTestSourceSetCheck.enabled = false

subprojects {
    apply plugin: 'ru.vyarus.animalsniffer'
    apply plugin: 'java'
    dependencies {
        signature 'net.sf.androidscents.signature:android-api-level-21:5.0.1_r2@signature'
    }
}

idea {
    module {
        sourceDirs += files(
                'build/generated/source/kapt/main',
                'build/generated/source/kapt/debug',
                'build/generated/source/kapt/release',
                'build/generated/source/kaptKotlin/main',
                'build/generated/source/kaptKotlin/debug',
                'build/generated/source/kaptKotlin/release',
                'build/tmp/kapt/main/kotlinGenerated')
        generatedSourceDirs += files(
                'build/generated/source/kapt/main',
                'build/generated/source/kapt/debug',
                'build/generated/source/kapt/release',
                'build/generated/source/kaptKotlin/main',
                'build/generated/source/kaptKotlin/debug',
                'build/generated/source/kaptKotlin/release',
                'build/tmp/kapt/main/kotlinGenerated')
    }
}

dependencies {
    kapt "io.arrow-kt:arrow-meta:$VERSION_NAME"
    kaptTest "io.arrow-kt:arrow-meta:$VERSION_NAME"
    testCompile "org.jetbrains.kotlin:kotlin-stdlib-jdk7:$KOTLIN_VERSION"
    testCompile "org.jetbrains.kotlinx:kotlinx-coroutines-core:$KOTLINX_COROUTINES_VERSION"
    testImplementation "io.arrow-kt:arrow-annotations:$VERSION_NAME", excludeArrow
    testImplementation "io.arrow-kt:arrow-core-data:$VERSION_NAME", excludeArrow
    testImplementation "io.arrow-kt:arrow-core:$VERSION_NAME", excludeArrow
    testImplementation "io.arrow-kt:arrow-fx:$VERSION_NAME", excludeArrow
    testImplementation "io.arrow-kt:arrow-fx-rx2:$VERSION_NAME", excludeArrow
    testImplementation "io.arrow-kt:arrow-optics:$VERSION_NAME", excludeArrow
    testImplementation "io.arrow-kt:arrow-ui:$VERSION_NAME", excludeArrow
    testImplementation "io.arrow-kt:arrow-ui-data:$VERSION_NAME", excludeArrow
    testImplementation "io.arrow-kt:arrow-validation:$VERSION_NAME", excludeArrow
    testImplementation "io.arrow-kt:arrow-mtl:$VERSION_NAME", excludeArrow
    testImplementation "io.arrow-kt:arrow-mtl-data:$VERSION_NAME", excludeArrow
    testImplementation "io.arrow-kt:arrow-meta:$VERSION_NAME", excludeArrow
    testImplementation "io.arrow-kt:arrow-meta:$VERSION_NAME", excludeArrow
    testImplementation "io.kotlintest:kotlintest-runner-junit5:$KOTLIN_TEST_VERSION", excludeArrow
    testRuntimeOnly "org.junit.vintage:junit-vintage-engine:$JUNIT_VINTAGE_VERSION"
}
